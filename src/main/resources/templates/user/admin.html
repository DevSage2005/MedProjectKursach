<!DOCTYPE html>
<html lang="en" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>О проекте</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-body-tertiary">
<header class="p-3 text-bg-dark" style="display: flex; justify-content: flex-end">
    <div class="container">
        <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start"><a href="/"
                                                                                                            class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
            <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap">
                <use xlink:href="#bootstrap"></use>
            </svg>
        </a>
            <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
                <li><a th:href="@{/main/index}"  class="nav-link px-2 text-secondary">Home</a></li>
                <li><a href="#" class="nav-link px-2 text-white">Features</a></li>
                <li><a href="#" class="nav-link px-2 text-white">Pricing</a></li>
                <li><a href="#" class="nav-link px-2 text-white">FAQs</a></li>
                <li><a th:href="@{/main/about}" class="nav-link px-2 text-white">About</a></li>
                <li sec:authorize="hasRole('ADMIN')"><a th:href="@{/adminPage}" class="nav-link px-2 text-white">Панель
                    администратора</a></li>
            </ul>
            <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3" role="search"><input type="search"
                                                                                       class="form-control form-control-dark text-bg-dark"
                                                                                       placeholder="Search..."
                                                                                       aria-label="Search"></form>
            <div>
                <form th:method="POST" th:action="@{/logout}">
                    <input type="submit" value="Logout" class="btn btn-warning">
                </form>
            </div>
        </div>
    </div>
</header>

<main class="container">
    <div class="row">
        <!-- Основной контент слева -->
        <div class="col-md-9">
            <div class="my-3 p-3 bg-body rounded shadow-sm">
                <h6 class="border-bottom pb-2 mb-0">Администраторы</h6>

                <div class="d-flex text-body-secondary pt-3"
                     th:each="user : ${users}"
                     th:if="${user.isAdmin()}">

                    <div class="flex-shrink-0 me-3">
                        <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center text-white"
                             style="width: 48px; height: 48px;">
                            <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
                            </svg>
                        </div>
                    </div>

                    <div class="flex-grow-1 border-bottom pb-3">
                        <div class="d-flex justify-content-between align-items-start mb-2">
                            <div>
                                <strong class="d-block text-gray-dark fs-6" th:text="${user.getEmail()}">@username</strong>
                                <div class="text-muted small mt-1">
                                    Дата рождения: <span th:text="${user.getDateOfBirth()}"></span>
                                </div>
                                <div class="text-muted small">
                                    Права: <span class="badge bg-light text-dark border" th:text="${user.getRole().getTranslation()}"></span>
                                </div>
                            </div>
                        </div>

                        <form th:action="@{/adminPage/setRole/{id}(id=${user.getId()})}" method="POST" class="mt-2">
                            <div class="row g-2 align-items-center">
                                <div class="col-auto">
                                    <label for="roleAd" class="form-label small mb-0">Назначить роль:</label>
                                </div>
                                <div class="col-auto">
                                    <select id="roleAd" name="newRole" class="form-select form-select-sm" style="width: 160px;">
                                        <option th:value="${T(ru.kursach.MedProject.enums.Roles).ROLE_ADMIN.name()}"
                                                th:text="${T(ru.kursach.MedProject.enums.Roles).ROLE_ADMIN.getTranslation()}">
                                        </option>
                                        <option th:value="${T(ru.kursach.MedProject.enums.Roles).ROLE_USER.name()}"
                                                th:text="${T(ru.kursach.MedProject.enums.Roles).ROLE_USER.getTranslation()}">
                                        </option>
                                    </select>
                                </div>
                                <div class="col-auto">
                                    <button type="submit" class="btn btn-primary btn-sm px-3">
                                        Назначить
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div class="my-3 p-3 bg-body rounded shadow-sm">
                <h6 class="border-bottom pb-2 mb-0">Пользователи</h6>

                <div class="d-flex text-body-secondary pt-3"
                     th:each="user : ${users}"
                     th:if="${user.isSimpleUser()}">

                    <div class="flex-shrink-0 me-3">
                        <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center text-white"
                             style="width: 48px; height: 48px;">
                            <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
                            </svg>
                        </div>
                    </div>

                    <div class="flex-grow-1 border-bottom pb-3">
                        <div class="d-flex justify-content-between align-items-start mb-2">
                            <div>
                                <strong class="d-block text-gray-dark fs-6" th:text="${user.getEmail()}">@username</strong>
                                <div class="text-muted small mt-1">
                                    Дата рождения: <span th:text="${user.getDateOfBirth()}"></span>
                                </div>
                                <div class="text-muted small">
                                    Права: <span class="badge bg-light text-dark border" th:text="${user.getRole().getTranslation()}"></span>
                                </div>
                            </div>
                        </div>

                        <form th:action="@{/adminPage/setRole/{id}(id=${user.getId()})}" method="POST" class="mt-2">
                            <div class="row g-2 align-items-center">
                                <div class="col-auto">
                                    <label for="role" class="form-label small mb-0">Назначить роль:</label>
                                </div>
                                <div class="col-auto">
                                    <select id="role" name="newRole" class="form-select form-select-sm" style="width: 160px;">
                                        <option th:value="${T(ru.kursach.MedProject.enums.Roles).ROLE_ADMIN.name()}"
                                                th:text="${T(ru.kursach.MedProject.enums.Roles).ROLE_ADMIN.getTranslation()}">
                                        </option>
                                        <option th:value="${T(ru.kursach.MedProject.enums.Roles).ROLE_USER.name()}"
                                                th:text="${T(ru.kursach.MedProject.enums.Roles).ROLE_USER.getTranslation()}">
                                        </option>
                                    </select>
                                </div>
                                <div class="col-auto">
                                    <button type="submit" class="btn btn-primary btn-sm px-3">
                                        Назначить
                                    </button>
                                </div>
                            </div>
                        </form>


                    </div>
                </div>
            </div>

            <div class="my-3 p-3 bg-body rounded shadow-sm">
                <h6 class="border-bottom pb-2 mb-0">Доктора</h6>

                <div class="d-flex text-body-secondary pt-3"
                     th:each="user : ${users}"
                     th:if="${user.isDoctor()}">

                    <div class="flex-shrink-0 me-3">
                        <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center text-white"
                             style="width: 48px; height: 48px;">
                            <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
                            </svg>
                        </div>
                    </div>

                    <div class="flex-grow-1 border-bottom pb-3">
                        <div class="d-flex justify-content-between align-items-start mb-2">
                            <div>
                                <strong class="d-block text-gray-dark fs-6" th:text="${user.getEmail()}">@username</strong>
                                <div class="text-muted small mt-1">
                                    Дата рождения: <span th:text="${user.getDateOfBirth()}"></span>
                                </div>
                                <div class="text-muted small">
                                    Права: <span class="badge bg-light text-dark border" th:text="${user.getRole().getTranslation()}"></span>
                                </div>
                            </div>
                        </div>

                        <form th:action="@{/adminPage/setRole/{id}(id=${user.getId()})}" method="POST" class="mt-2">
                            <div class="row g-2 align-items-center">
                                <div class="col-auto">
                                    <label for="roleDoc" class="form-label small mb-0">Назначить роль:</label>
                                </div>
                                <div class="col-auto">
                                    <select id="roleDoc" name="newRole" class="form-select form-select-sm"
                                            style="width: 160px;">
                                        <option th:value="${T(ru.kursach.MedProject.enums.Roles).ROLE_ADMIN.name()}"
                                                th:text="${T(ru.kursach.MedProject.enums.Roles).ROLE_ADMIN.getTranslation()}">
                                        </option>
                                        <option th:value="${T(ru.kursach.MedProject.enums.Roles).ROLE_USER.name()}"
                                                th:text="${T(ru.kursach.MedProject.enums.Roles).ROLE_USER.getTranslation()}">
                                        </option>
                                    </select>
                                </div>
                                <div class="col-auto">
                                    <button type="submit" class="btn btn-primary btn-sm px-3">
                                        Назначить
                                    </button>
                                </div>
                            </div>
                        </form>


                    </div>
                </div>
            </div>
        </div>

        <!-- Боковая панель справа -->
        <div class="col-md-3">
            <div class="flex-shrink-0 p-3 bg-body rounded shadow-sm" style="width: 100%;">
                <a href="/" class="d-flex align-items-center pb-3 mb-3 link-body-emphasis text-decoration-none border-bottom">
                    <svg class="bi pe-none me-2" width="30" height="24" aria-hidden="true">
                        <use xlink:href="#bootstrap"></use>
                    </svg>
                    <span class="fs-5 fw-semibold">Меню</span>
                </a>
                <ul class="list-unstyled ps-0">
                    <li class="mb-1">
                        <div class="collapse show" id="home-collapse">
                            <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                                <li><a th:href="@{/adminPage/addDoctor}" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Добавить доктора в систему</a></li>
<!--                                <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Updates</a></li>-->
<!--                                <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Reports</a></li>-->
                            </ul>
                        </div>
                    </li>
                    <li class="mb-1">
                        <button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed"
                                data-bs-toggle="collapse" data-bs-target="#dashboard-collapse" aria-expanded="false">
                            Dashboard
                        </button>
                        <div class="collapse" id="dashboard-collapse">
                            <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                                <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Overview</a></li>
                                <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Weekly</a></li>
                                <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Monthly</a></li>
                                <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Annually</a></li>
                            </ul>
                        </div>
                    </li>
                    <li class="mb-1">
                        <button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed"
                                data-bs-toggle="collapse" data-bs-target="#orders-collapse" aria-expanded="false">
                            Orders
                        </button>
                        <div class="collapse" id="orders-collapse">
                            <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                                <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">New</a></li>
                                <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Processed</a></li>
                                <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Shipped</a></li>
                                <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Returned</a></li>
                            </ul>
                        </div>
                    </li>
                    <li class="border-top my-3"></li>
                    <li class="mb-1">
                        <button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed"
                                data-bs-toggle="collapse" data-bs-target="#account-collapse" aria-expanded="false">
                            Account
                        </button>
                        <div class="collapse" id="account-collapse">
                            <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                                <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">New...</a></li>
                                <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Profile</a></li>
                                <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Settings</a></li>
                                <li><a href="#" class="link-body-emphasis d-inline-flex text-decoration-none rounded">Sign out</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>